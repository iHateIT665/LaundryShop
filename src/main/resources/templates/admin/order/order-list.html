<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{admin/layout :: layout(~{:: .main-content}, 'orders', 'Quản Lý Đơn Hàng')}">
<body>
    <div class="main-content">
        <h2 class="mb-4">Danh Sách Đơn Hàng</h2>

        <div class="card shadow-sm border-0">
            <div class="card-body p-0">
                <table class="table table-striped table-hover mb-0 align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th class="ps-3">Mã Đơn</th>
                            <th>Khách Hàng</th>
                            <th>Ngày Đặt</th>
                            <th>Tổng Tiền</th>
                            <th>Trạng Thái</th>
                            <th class="text-center">Hành Động</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="order : ${orders}">
                            <td class="ps-3 fw-bold" th:text="'#' + ${order.orderId}"></td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img th:src="@{${order.customer.avatarPath}}"
                                        class="rounded-circle border shadow-sm me-2"
                                        style="width: 40px; height: 40px; object-fit: cover;" alt="Avatar">
                                    <div>
                                        <div class="fw-bold" th:text="${order.customer.fullName}"></div>
                                        <small class="text-muted" th:text="${order.customer.phone}"></small>
                                    </div>
                                </div>
                            </td>
                            <td th:text="${#temporals.format(order.createdAt, 'dd-MM-yyyy HH:mm')}"></td>
                            <td class="fw-bold text-success"
                                th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' đ'">
                            </td>
                            <td>
                                <span th:if="${order.status == 'PENDING'}" class="badge bg-warning text-dark">Chờ Duyệt</span>
                                <span th:if="${order.status == 'CONFIRMED'}" class="badge bg-primary">Đã Duyệt</span>
                                <span th:if="${order.status == 'PROCESSING'}" class="badge bg-info text-dark">Đang Giặt</span>
                                <span th:if="${order.status == 'SHIPPING'}" class="badge bg-info text-dark">Đang Giao</span>
                                <span th:if="${order.status == 'COMPLETED'}" class="badge bg-success">Hoàn Thành</span>
                                <span th:if="${order.status == 'CANCELLED'}" class="badge bg-danger">Đã Hủy</span>
                            </td>
                            <td class="text-center">
                                <a th:href="@{/admin/orders/detail/{id}(id=${order.orderId})}"
                                    class="btn btn-info btn-sm mx-1 text-white" title="Xem Chi Tiết">
                                    <i class="fa-solid fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div th:if="${#lists.isEmpty(orders)}" class="alert alert-info mt-3 text-center">
            Chưa có đơn hàng nào.
        </div>
    </div>
</body>
</html>